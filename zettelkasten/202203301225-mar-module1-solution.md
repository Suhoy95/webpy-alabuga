# 202203301225 Разбор 1-го модуля с API

1. склонировать себе git репозиторий, и развернуть виртуальное окружение согласно requirements.txt: `https://gitlab.com/alabuga/firstyearweb/march-ws-1`. Проверка:
![](2022-03-30-12-27-14.png)
2. Задача 2:
    1. Запулить main
    2. Создать Django-проект с именем `module1`
    3. В нем создать Django-приложение с именем `shop`
    4. Должны быть файлы как в файле django_files.txt. Скрипт `check_djangofiles.sh` для проверки
![](2022-03-30-12-28-18.png)
3. Задача 3.
    1. Переключаемся на ветку со своей фамилией
    2. Удаляем из .gitignore `module1`, и добавляем строки по скриншоту
    3. коммитим ваш Django-проект и отправляем на gitlab
![](2022-03-30-12-29-40.png)
4. Задача 4. Сделаем показ Продуктов по /api/products : [YouTube](https://youtu.be/IHB5LW4VWG8)
    1. Создайте в приложении shop, модель Product с необходимыми полями
    2. Сделайте во view функцию get_products(), которая возвращает JSONResponse
    3. Привижите ее в urls.py по пути /api/product
    4. Как все будет готово сделать коммит в своей ветке и запушить
![](2022-03-30-12-44-28.png)
![](2022-03-30-12-45-10.png)
![](2022-03-30-12-46-12.png)
![](2022-03-30-12-44-42.png)
![](2022-03-30-12-47-00.png)
![](2022-03-30-12-47-13.png)
![](2022-03-30-12-47-22.png)
![](2022-03-30-12-50-41.png)
5. Задача 5. Сделаем Регистрацию по POST /api/signup: [Youtube](https://youtu.be/S2rPt07WLyE). **Каждый шаг не забываем проверять в Postmane!!!!**
    1. Сделаем свою модель пользователя, чтобы не привязываться к Django-Аунтификации
    ![](2022-03-30-15-11-48.png)
    2. Сделаем проверку на то, что метод обрабатывает только POST. Выключим CSRF-Validatoin (В REST API это не требуется):
    ![](2022-03-30-15-13-00.png)
    ![](2022-03-30-15-13-22.png)
    ![](2022-03-30-15-13-12.png)
    3. Для возвращения 404 сделаем функцию возвращающую JSON по ТЗ (Для валидации делаем аналогичную функцию):
    ![](2022-03-30-15-14-07.png)
    ![](2022-03-30-15-17-59.png)
    4. Загрузка тела запроса, как JSON:
    ![](2022-03-30-15-15-43.png)
    ![](2022-03-30-15-15-56.png)
    5. Валидация
        1. что все обязательные поля не пустые:
        ![](2022-03-30-15-16-34.png)
        2. Что Email соответствует шаблону:
        ![](2022-03-30-15-17-24.png)
        ![](2022-03-30-15-16-58.png)
        3. Что email еще не занят:
        ![](2022-03-30-15-17-46.png)
        4. Что пароль не менее 6-ти символов:
        ![](2022-03-30-15-18-32.png)
    6. Генерация токена
        1. Используем `hashlib` стандартную библиотеку Питона: https://docs.python.org/3.7/library/hashlib.html#hash-algorithms
        ![](2022-03-30-15-19-22.png)
        ![](2022-03-30-15-19-33.png)
        2. Создаем токен по текущему времени/Имени пользователя и Паролю
        ![](2022-03-30-15-20-48.png)
        ![](2022-03-30-15-21-07.png)
        ![](2022-03-30-15-21-16.png)
    7. Создаем Пользователя в БД (Проверяем в Админке):
        ![](2022-03-30-15-23-05.png)
6. Задача 6. По аналогии с Регистрацией сделать Аутентификацию пользователя.
