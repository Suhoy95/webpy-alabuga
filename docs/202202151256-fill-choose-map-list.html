<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>WEB/Python</title>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet"/>
<style>
        /* Заглушка,, чтобы больше скриншоты не вылезали за границы контейнера */
        img {
            display: block;
            max-width: 100%;
            margin: 10px auto 10px;
            border: green solid 3px;
            border-radius: 5px;
        }
        body {
            font-size: 18px;
        }
    </style>
</head>
<body>
<header></header>
<main class="container">
<h1>202202151256 Заполнение экрана Выбора Карт</h1>
<p>Продолжаем разбираться в этапе <a href="202202151147-fetch-maps-Module-2-WS.html">Получения Информации о картах Игры</a>.</p>
<p>На прошлом этапе мы <a href="202202151200-fetch-maps-json-module2-ws.html">получили maps.json</a>,
сейчас нам нужно отобразить информацию о картах на странице в виде карточек.</p>
<h2>Находим верстку карточки</h2>
<ol>
<li>Рассмотрим <code>index.html</code> и найдем HTML-код одной карточки, а также найдем
какую информацию нам нужно туда подставить. В нашем случае, это картинка (<code>src</code>)
и название карты (в нескольких местах):</li>
</ol>
<p><img alt="" src="2022-02-15-13-37-22.png"/></p>
<ol>
<li>В HTML-коде карточки есть часть непонятных атрибутов, которые нам вроде как
и не нужны. Верстальщик спешил и просто копировал верстку с BootStrap-а.
Поэтому мы можем пока убрать её:</li>
</ol>
<p><img alt="" src="2022-02-15-13-54-16.png"/></p>
<ol>
<li>На самом деле, мы убрали HTML-аттрибуты для работы с модальным окном
в BootStrap. Мы его будем <a href="202202181645-login-form-m2-ws.html">делать по-другому</a>,
но и с <a href="202202151358-modal-window-wth-Bootstrap.html">модальными окнами BootStrap</a>
было бы неплохо разобраться.</li>
</ol>
<h2>Создаем функцию по генерации HTML-кода одной карточки</h2>
<ol>
<li>
<p>Возьмем HTML-верстку одной карточки, и создадим в файле <code>script.js</code> функцию, которая из объекта возвращает строку-HTML верстку:</p>
<blockquote>
<p>Обратите внимание!
Мы использовали <a href="https://learn.javascript.ru/string#kavychki" rel="noopener noreferrer nofollow" target="_blank">многострочные строки</a> с обратной кавычкой (`), которая располагается под буквой <code>ё</code>.</p>
</blockquote>
</li>
</ol>
<p><img alt="" src="2022-02-15-14-07-18.png"/></p>
<ol>
<li>Проверим в консоли Браузера, что функция работает:</li>
</ol>
<p><img alt="" src="2022-02-15-15-44-16.png"/></p>
<ol>
<li>Теперь воспользуемся особенностью многострочных строк JavaScript - <a href="202202151547-interpolation.html">интерполяцией</a>. Для этого внутри строки используем синтаксис <code>${VariableName}</code>:</li>
</ol>
<p><img alt="" src="2022-02-15-14-08-42.png"/></p>
<ol>
<li>Проверяем в консоли, что значения подставляются:</li>
</ol>
<p><img alt="" src="2022-02-15-14-15-44.png"/></p>
<ol>
<li>Можем несколько упростить код, воспользовавшись <a href="https://learn.javascript.ru/destructuring-assignment#umnye-parametry-funktsiy" rel="noopener noreferrer nofollow" target="_blank">Деструктуризацией аргументов функций</a>:</li>
</ol>
<p><img alt="" src="2022-02-15-14-09-19.png"/></p>
<ol>
<li>Не забываем проверить, что ничего не сломалось и все работает также</li>
</ol>
<h2>Генерирование списка HTML-карточек</h2>
<ol>
<li>
<p>Теперь сделаем функцию, которая принимает массив карт и возвращает HTML-верстку для всего массива.</p>
</li>
<li>
<p>Это можно сделать с помощью написанной нами ранее функции <code>generateMapCardHTML()</code> и <a href="https://learn.javascript.ru/while-for#tsikl-for" rel="noopener noreferrer nofollow" target="_blank">JavaScript-циклов</a>:</p>
</li>
</ol>
<p><img alt="" src="2022-02-15-14-19-44.png"/></p>
<ol>
<li>Попробуем в консоли разработчика, убедившись что все работает:</li>
</ol>
<p><img alt="" src="2022-02-15-14-20-19.png"/></p>
<ol>
<li>Так же, можем сократить код используя <a href="https://learn.javascript.ru/array-methods#map" rel="noopener noreferrer nofollow" target="_blank">JS-метод массива <code>.map()</code></a>, который принимает функцию и применяет к каждому элементу массива эту функцию. После массив HTML-карточек можно соединить с помощью <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/join" rel="noopener noreferrer nofollow" target="_blank">метода массива <code>.join("")</code></a>:</li>
</ol>
<p><img alt="" src="2022-02-15-14-26-09.png"/></p>
<ol>
<li>Не забываем проверить, что ничего не сломалось и все работает также</li>
</ol>
<h2>Размещение списка HTML-карточек на Экране Выбора Карт</h2>
<ol>
<li>
<p>Сгенерировав HTML-код списка карточек нам осталось вставить его в документ.</p>
</li>
<li>
<p>Для начала найдем в <code>index.html</code>, где были захардкожены эти карточки.
Больше нам они особо нам не нужны, поэтому можем их <em>удалить</em> (или <em>закомментировать</em>), и чтобы найти HTML-элемент куда будем добавлять список, обозначим его классом <code>choose-map-screen</code>:</p>
</li>
</ol>
<p><img alt="" src="2022-02-15-14-22-41.png"/></p>
<ol>
<li>С помощью метода <code>document.querySelector()</code> найдем наш HTML-элемент в нашем JS-файле. Чтобы проверить что он нашелся и не равен <code>null</code> (так будет если мы где-то опечатались и <code>.querySelector()</code> не смог найти элемент), мы добавим ключевое слово <code>debugger</code>. Увидев его, отладчик остановит нашу программу именно на этом месте, и мы сможем проверить значение переменной:</li>
</ol>
<p><img alt="" src="2022-02-15-14-23-54.png"/></p>
<ol>
<li>Проверяем в Инструментах разработчика:</li>
</ol>
<p><img alt="" src="2022-02-15-14-24-16.png"/></p>
<ol>
<li>Отлично, осталось добавить в <code>.innerHTML</code> наш сгенерированный HTML:</li>
</ol>
<p><img alt="" src="2022-02-15-14-25-02.png"/></p>
<ol>
<li>Проверяем в браузере, что все работает:</li>
</ol>
<p><img alt="" src="2022-02-15-14-26-27.png"/></p>
<h2>Навигация</h2>
<ul>
<li><a href="202202150946-WS-module-2.html">WorldSkills. Модуль 2. Программирование на стороне Клиента</a><ul>
<li>Следующее: <a href="202202151333-change-screen.html">Переключение Экранов Игры</a></li>
<li>Предыдущее: <a href="202202151200-fetch-maps-json-module2-ws.html">Использование fetch</a></li>
</ul>
</li>
</ul>
</main>
<footer></footer>
<script crossorigin="anonymous" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
